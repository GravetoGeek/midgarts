package spr

import (
	"bytes"
	"encoding/binary"
	"fmt"
	"image"
	"image/color"
	"io"
	"log"
	"strconv"

	"github.com/pkg/errors"
	"github.com/project-midgard/midgarts/bytesutil"
)

type FileType int

const (
	HeaderSignature = "SP"
	PaletteSize     = 1024

	FileTypePAL  FileType = iota
	FileTypeRGBA          = 1
)

type SpriteFrame struct {
	SpriteType FileType
	Width      uint16
	Height     uint16
	Data       []byte
	Compiled   bool
}

type SpriteFile struct {
	Header struct {
		Signature         string
		Version           float32
		IndexedFrameCount uint16
		RGBAFrameCount    uint16
		RGBAIndex         uint16
	}

	Frames  []*SpriteFrame
	Palette [PaletteSize]byte
}

func Load(buf *bytes.Buffer) (f *SpriteFile, err error) {
	f = new(SpriteFile)
	reader := bytes.NewReader(buf.Bytes())

	if err := f.parseHeader(reader); err != nil {
		return nil, err
	}

	if f.Header.Version < 2.1 {
		return nil, fmt.Errorf("unsupported version %f\n", f.Header.Version)
	}

	if err = f.readCompressedIndexedFrames(reader); err != nil {
		return nil, err
	}

	if err = f.readRGBAFrames(reader); err != nil {
		return nil, err
	}

	f.parsePalette(int64(reader.Len())-1024, reader)

	return f, nil
}

func (f *SpriteFile) parseHeader(buf io.ReadSeeker) error {
	log.Println("parsing header...")

	var signature [2]byte
	_ = binary.Read(buf, binary.LittleEndian, &signature)

	signatureStr := string(signature[:])
	if signatureStr != HeaderSignature {
		return fmt.Errorf("invalid signature: %s\n", signature)
	}

	var major, minor byte
	_ = binary.Read(buf, binary.LittleEndian, &minor)
	_ = binary.Read(buf, binary.LittleEndian, &major)

	version, err := strconv.ParseFloat(fmt.Sprintf("%d.%d", major, minor), 32)
	if err != nil {
		return errors.Wrapf(err, "invalid version: %s\n", strconv.FormatFloat(version, 'E', -1, 32))
	}

	var indexedFrameCount, rgbaFrameCount uint16
	_ = binary.Read(buf, binary.LittleEndian, &indexedFrameCount)

	if version > 1.1 {
		_ = binary.Read(buf, binary.LittleEndian, &rgbaFrameCount)
	}

	f.Header.Signature = signatureStr
	f.Header.Version = float32(version)
	f.Header.IndexedFrameCount = indexedFrameCount
	f.Header.RGBAFrameCount = rgbaFrameCount
	f.Header.RGBAIndex = indexedFrameCount
	f.Frames = make([]*SpriteFrame, indexedFrameCount+rgbaFrameCount)
	f.Palette = [PaletteSize]byte{}

	return nil
}

// Parse .spr indexed images encoded with run-length encoding (RLE)
func (f *SpriteFile) readCompressedIndexedFrames(buf io.ReadSeeker) error {
	log.Println("reading compressed indexed frames...")

	var (
		width, height    uint16
		c, count         byte
		end, index, size int
		data             []byte
	)

	for i := 0; i < int(f.Header.IndexedFrameCount); i++ {
		_ = binary.Read(buf, binary.LittleEndian, &width)
		_ = binary.Read(buf, binary.LittleEndian, &height)

		size = int(width * height)
		data = make([]byte, size)
		index = 0

		var tmp uint16
		_ = binary.Read(buf, binary.LittleEndian, &tmp)
		offset, _ := buf.Seek(0, io.SeekCurrent)
		end = int(tmp) + int(offset)

		for int(offset) < end {
			_ = binary.Read(buf, binary.LittleEndian, &c)
			data[index] = c
			index++

			if c == 0 {
				_ = binary.Read(buf, binary.LittleEndian, &count)

				if count == 0x00 {
					data[index] = count
					index++
				} else {
					for j := 1; j < int(count); j++ {
						data[index] = c
						index++
					}
				}
			}

			offset, _ = buf.Seek(0, io.SeekCurrent)
		}

		f.Frames[i] = &SpriteFrame{
			SpriteType: FileTypePAL,
			Width:      width,
			Height:     height,
			Data:       data,
		}
	}

	return nil
}

func (f *SpriteFile) readRGBAFrames(buf io.ReadSeeker) error {
	log.Println("reading rgba frames...")

	for i := 0; i < int(f.Header.RGBAFrameCount); i++ {
		var (
			width, height uint16
			size          int
			data          []byte
		)

		_ = binary.Read(buf, binary.LittleEndian, &width)
		_ = binary.Read(buf, binary.LittleEndian, &height)

		size = int(width*height) * 4
		data = make([]byte, size)
		_ = binary.Read(buf, binary.LittleEndian, &data)

		f.Frames[i+int(f.Header.RGBAIndex)] = &SpriteFrame{
			SpriteType: FileTypeRGBA,
			Width:      width,
			Height:     height,
			Data:       data,
		}

		_, _ = buf.Seek(int64(width*height)*4, io.SeekCurrent)
	}

	return nil
}

func (f *SpriteFile) parsePalette(skip int64, buf io.ReadSeeker) {
	_ = bytesutil.SkipBytes(buf, skip)
	_ = binary.Read(buf, binary.LittleEndian, &f.Palette)
}

func (f *SpriteFile) Image(index int, mirrored bool, bgColor color.Color) image.Image {
	var (
		frame  = f.Frames[index]
		width  = int(frame.Width)
		height = int(frame.Height)
		pal    = f.Palette
		data   = frame.Data
	)

	//data = []byte{
	//	255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 153, 123, 123, 255, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 220, 203, 195, 255, 153, 123, 123, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 220, 203, 195, 255, 220, 203, 195, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 92, 37, 59, 255, 220, 203, 195, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 126, 65, 81, 255, 255, 0, 0, 0, 92, 37, 59, 255, 92, 37, 59, 255, 184, 163, 155, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 255, 0, 0, 0, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 220, 203, 195, 255, 220, 203, 195, 255, 153, 123, 123, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 220, 203, 195, 255, 126, 65, 81, 255, 255, 0, 0, 0, 92, 37, 59, 255, 126, 65, 81, 255, 137, 103, 107, 255, 92, 37, 59, 255, 158, 92, 102, 255, 126, 65, 81, 255, 126, 65, 81, 255, 126, 65, 81, 255, 92, 37, 59, 255, 137, 103, 107, 255, 184, 163, 155, 255, 184, 163, 155, 255, 137, 103, 107, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 220, 203, 195, 255, 220, 203, 195, 255, 92, 37, 59, 255, 126, 65, 81, 255, 92, 37, 59, 255, 126, 65, 81, 255, 126, 65, 81, 255, 200, 142, 140, 255, 158, 92, 102, 255, 158, 92, 102, 255, 126, 65, 81, 255, 158, 92, 102, 255, 92, 37, 59, 255, 137, 103, 107, 255, 153, 123, 123, 255, 184, 163, 155, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 137, 103, 107, 255, 184, 163, 155, 255, 184, 163, 155, 255, 92, 37, 59, 255, 137, 103, 107, 255, 126, 65, 81, 255, 126, 65, 81, 255, 233, 185, 198, 255, 233, 185, 198, 255, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 158, 92, 102, 255, 126, 65, 81, 255, 126, 65, 81, 255, 153, 123, 123, 255, 92, 37, 59, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 137, 103, 107, 255, 153, 123, 123, 255, 92, 37, 59, 255, 153, 123, 123, 255, 92, 37, 59, 255, 126, 65, 81, 255, 184, 116, 124, 255, 126, 65, 81, 255, 233, 185, 198, 255, 233, 185, 198, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 216, 166, 162, 255, 184, 116, 124, 255, 184, 116, 124, 255, 126, 65, 81, 255, 92, 37, 59, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 153, 123, 123, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 200, 142, 140, 255, 233, 185, 198, 255, 184, 116, 124, 255, 184, 116, 124, 255, 200, 142, 140, 255, 200, 142, 140, 255, 216, 166, 162, 255, 184, 116, 124, 255, 184, 116, 124, 255, 92, 37, 59, 255, 126, 65, 81, 255, 158, 92, 102, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 126, 65, 81, 255, 92, 37, 59, 255, 92, 37, 59, 255, 158, 92, 102, 255, 158, 92, 102, 255, 92, 37, 59, 255, 236, 202, 198, 255, 233, 185, 198, 255, 200, 142, 140, 255, 200, 142, 140, 255, 184, 116, 124, 255, 184, 116, 124, 255, 158, 92, 102, 255, 216, 166, 162, 255, 236, 202, 198, 255, 236, 202, 198, 255, 233, 185, 198, 255, 184, 116, 124, 255, 126, 65, 81, 255, 126, 65, 81, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 158, 92, 102, 255, 158, 92, 102, 255, 158, 92, 102, 255, 158, 92, 102, 255, 158, 92, 102, 255, 126, 65, 81, 255, 236, 202, 198, 255, 233, 185, 198, 255, 216, 166, 162, 255, 184, 116, 124, 255, 200, 142, 140, 255, 200, 142, 140, 255, 158, 92, 102, 255, 236, 202, 198, 255, 233, 185, 198, 255, 233, 185, 198, 255, 233, 185, 198, 255, 216, 166, 162, 255, 158, 92, 102, 255, 158, 92, 102, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 126, 65, 81, 255, 184, 116, 124, 255, 184, 116, 124, 255, 158, 92, 102, 255, 216, 166, 162, 255, 216, 166, 162, 255, 236, 202, 198, 255, 233, 185, 198, 255, 216, 166, 162, 255, 184, 116, 124, 255, 158, 92, 102, 255, 200, 142, 140, 255, 200, 142, 140, 255, 236, 202, 198, 255, 233, 185, 198, 255, 233, 185, 198, 255, 216, 166, 162, 255, 216, 166, 162, 255, 126, 65, 81, 255, 126, 65, 81, 255, 92, 37, 59, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 216, 166, 162, 255, 216, 166, 162, 255, 200, 142, 140, 255, 236, 202, 198, 255, 233, 185, 198, 255, 200, 142, 140, 255, 184, 116, 124, 255, 158, 92, 102, 255, 200, 142, 140, 255, 200, 142, 140, 255, 236, 202, 198, 255, 233, 185, 198, 255, 233, 185, 198, 255, 216, 166, 162, 255, 184, 116, 124, 255, 126, 65, 81, 255, 126, 65, 81, 255, 92, 37, 59, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 126, 65, 81, 255, 184, 116, 124, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 216, 166, 162, 255, 184, 116, 124, 255, 200, 142, 140, 255, 233, 185, 198, 255, 200, 142, 140, 255, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 200, 142, 140, 255, 184, 116, 124, 255, 233, 185, 198, 255, 233, 185, 198, 255, 216, 166, 162, 255, 216, 166, 162, 255, 184, 116, 124, 255, 126, 65, 81, 255, 126, 65, 81, 255, 126, 65, 81, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 158, 92, 102, 255, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 158, 92, 102, 255, 216, 166, 162, 255, 184, 116, 124, 255, 184, 116, 124, 255, 200, 142, 140, 255, 200, 142, 140, 255, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 158, 92, 102, 255, 233, 185, 198, 255, 233, 185, 198, 255, 216, 166, 162, 255, 184, 116, 124, 255, 158, 92, 102, 255, 126, 65, 81, 255, 126, 65, 81, 255, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 158, 92, 102, 255, 184, 116, 124, 255, 158, 92, 102, 255, 158, 92, 102, 255, 200, 142, 140, 255, 200, 142, 140, 255, 158, 92, 102, 255, 158, 92, 102, 255, 200, 142, 140, 255, 158, 92, 102, 255, 216, 166, 162, 255, 216, 166, 162, 255, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 158, 92, 102, 255, 158, 92, 102, 255, 216, 166, 162, 255, 216, 166, 162, 255, 216, 166, 162, 255, 184, 116, 124, 255, 158, 92, 102, 255, 158, 92, 102, 255, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 126, 65, 81, 255, 126, 65, 81, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 158, 92, 102, 255, 200, 142, 140, 255, 216, 166, 162, 255, 216, 166, 162, 255, 184, 116, 124, 255, 200, 142, 140, 255, 216, 166, 162, 255, 216, 166, 162, 255, 216, 166, 162, 255, 216, 166, 162, 255, 216, 166, 162, 255, 216, 166, 162, 255, 184, 116, 124, 255, 158, 92, 102, 255, 216, 166, 162, 255, 216, 166, 162, 255, 184, 116, 124, 255, 184, 116, 124, 255, 158, 92, 102, 255, 200, 142, 140, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 200, 142, 140, 255, 200, 142, 140, 255, 216, 166, 162, 255, 216, 166, 162, 255, 216, 166, 162, 255, 200, 142, 140, 255, 200, 142, 140, 255, 216, 166, 162, 255, 126, 65, 81, 255, 126, 65, 81, 255, 92, 37, 59, 255, 92, 37, 59, 255, 200, 142, 140, 255, 158, 92, 102, 255, 126, 65, 81, 255, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 158, 92, 102, 255, 200, 142, 140, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 126, 65, 81, 255, 158, 92, 102, 255, 184, 116, 124, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 216, 166, 162, 255, 216, 166, 162, 255, 216, 166, 162, 255, 200, 142, 140, 255, 126, 65, 81, 255, 158, 92, 102, 255, 126, 65, 81, 255, 126, 65, 81, 255, 158, 92, 102, 255, 126, 65, 81, 255, 126, 65, 81, 255, 126, 65, 81, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 200, 142, 140, 255, 200, 142, 140, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 92, 37, 59, 255, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 200, 142, 140, 255, 200, 142, 140, 255, 184, 116, 124, 255, 184, 116, 124, 255, 216, 166, 162, 255, 216, 166, 162, 255, 200, 142, 140, 255, 184, 116, 124, 255, 126, 65, 81, 255, 158, 92, 102, 255, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 126, 65, 81, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 158, 92, 102, 255, 158, 92, 102, 255, 158, 92, 102, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 126, 65, 81, 255, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 200, 142, 140, 255, 184, 116, 124, 255, 184, 116, 124, 255, 233, 185, 198, 255, 216, 166, 162, 255, 184, 116, 124, 255, 126, 65, 81, 255, 184, 116, 124, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 92, 37, 59, 255, 126, 65, 81, 255, 158, 92, 102, 255, 158, 92, 102, 255, 158, 92, 102, 255, 126, 65, 81, 255, 158, 92, 102, 255, 92, 37, 59, 255, 126, 65, 81, 255, 184, 116, 124, 255, 184, 116, 124, 255, 158, 92, 102, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 126, 65, 81, 255, 184, 116, 124, 255, 158, 92, 102, 255, 184, 116, 124, 255, 200, 142, 140, 255, 184, 116, 124, 255, 184, 116, 124, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 158, 92, 102, 255, 92, 37, 59, 255, 184, 163, 155, 255, 184, 163, 155, 255, 126, 65, 81, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 158, 92, 102, 255, 126, 65, 81, 255, 126, 65, 81, 255, 92, 37, 59, 255, 126, 65, 81, 255, 184, 116, 124, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 255, 0, 0, 0, 126, 65, 81, 255, 184, 116, 124, 255, 158, 92, 102, 255, 184, 116, 124, 255, 200, 142, 140, 255, 184, 116, 124, 255, 200, 142, 140, 255, 184, 116, 124, 255, 92, 37, 59, 255, 158, 92, 102, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 216, 166, 162, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 126, 65, 81, 255, 126, 65, 81, 255, 126, 65, 81, 255, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 158, 92, 102, 255, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 200, 142, 140, 255, 200, 142, 140, 255, 126, 65, 81, 255, 158, 92, 102, 255, 184, 163, 155, 255, 184, 163, 155, 255, 126, 65, 81, 255, 216, 166, 162, 255, 216, 166, 162, 255, 216, 166, 162, 255, 200, 142, 140, 255, 200, 142, 140, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 158, 92, 102, 255, 92, 37, 59, 255, 255, 0, 0, 0, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 158, 92, 102, 255, 158, 92, 102, 255, 158, 92, 102, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 126, 65, 81, 255, 158, 92, 102, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 184, 116, 124, 255, 216, 166, 162, 255, 216, 166, 162, 255, 216, 166, 162, 255, 200, 142, 140, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 158, 92, 102, 255, 92, 37, 59, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 126, 65, 81, 255, 126, 65, 81, 255, 158, 92, 102, 255, 184, 116, 124, 255, 200, 142, 140, 255, 126, 65, 81, 255, 126, 65, 81, 255, 158, 92, 102, 255, 184, 163, 155, 255, 92, 37, 59, 255, 184, 116, 124, 255, 200, 142, 140, 255, 216, 166, 162, 255, 216, 166, 162, 255, 200, 142, 140, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 158, 92, 102, 255, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 184, 116, 124, 255, 158, 92, 102, 255, 184, 116, 124, 255, 92, 37, 59, 255, 92, 37, 59, 255, 158, 92, 102, 255, 158, 92, 102, 255, 92, 37, 59, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 92, 37, 59, 255, 158, 92, 102, 255, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 158, 92, 102, 255, 216, 166, 162, 255, 184, 116, 124, 255, 184, 116, 124, 255, 216, 166, 162, 255, 92, 37, 59, 255, 158, 92, 102, 255, 158, 92, 102, 255, 92, 37, 59, 255, 92, 37, 59, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 184, 116, 124, 255, 200, 142, 140, 255, 200, 142, 140, 255, 184, 116, 124, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 92, 37, 59, 255, 92, 37, 59, 255, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 126, 65, 81, 255, 184, 116, 124, 255, 216, 166, 162, 255, 184, 116, 124, 255, 200, 142, 140, 255, 216, 166, 162, 255, 92, 37, 59, 255, 200, 142, 140, 255, 92, 37, 59, 255, 158, 92, 102, 255, 126, 65, 81, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 184, 116, 124, 255, 200, 142, 140, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 126, 65, 81, 255, 92, 37, 59, 255, 255, 0, 0, 0, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 126, 65, 81, 255, 184, 116, 124, 255, 200, 142, 140, 255, 200, 142, 140, 255, 200, 142, 140, 255, 216, 166, 162, 255, 126, 65, 81, 255, 200, 142, 140, 255, 158, 92, 102, 255, 126, 65, 81, 255, 158, 92, 102, 255, 158, 92, 102, 255, 200, 142, 140, 255, 184, 116, 124, 255, 184, 116, 124, 255, 200, 142, 140, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 184, 116, 124, 255, 200, 142, 140, 255, 184, 116, 124, 255, 126, 65, 81, 255, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0, 0, 255, 0, 0}
	//
	//pal = [PaletteSize]byte{
	//	255, 0, 0, 0, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 244, 188, 0, 255, 225, 182, 0, 232, 199, 165, 0, 209, 176, 148, 0, 186, 153, 131, 0, 163, 129, 113, 0, 150, 111, 102, 0, 130, 83, 83, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 237, 237, 255, 0, 206, 204, 224, 0, 175, 167, 193, 0, 149, 139, 167, 0, 122, 111, 140, 0, 100, 94, 119, 0, 71, 67, 89, 0, 41, 39, 59, 0, 255, 222, 196, 0, 250, 187, 171, 0, 244, 152, 146, 0, 233, 126, 122, 0, 203, 98, 102, 0, 178, 70, 81, 0, 140, 53, 62, 0, 117, 40, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 192, 0, 222, 230, 171, 0, 192, 214, 150, 0, 155, 181, 126, 0, 126, 148, 102, 0, 95, 116, 81, 0, 64, 84, 59, 0, 41, 55, 37, 0, 255, 251, 200, 0, 253, 227, 178, 0, 251, 203, 156, 0, 238, 179, 133, 0, 218, 151, 115, 0, 197, 122, 96, 0, 171, 105, 87, 0, 145, 81, 78, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 240, 229, 0, 236, 202, 198, 0, 216, 166, 162, 0, 200, 142, 140, 0, 184, 116, 124, 0, 158, 92, 102, 0, 126, 65, 81, 0, 92, 37, 59, 0, 255, 229, 163, 0, 251, 197, 139, 0, 247, 165, 114, 0, 242, 133, 89, 0, 237, 100, 71, 0, 190, 67, 48, 0, 143, 34, 24, 0, 97, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 222, 179, 162, 0, 195, 155, 143, 0, 175, 134, 127, 0, 153, 114, 111, 0, 131, 94, 95, 0, 109, 73, 79, 0, 84, 54, 64, 0, 59, 35, 49, 0, 255, 243, 235, 0, 238, 223, 215, 0, 220, 203, 195, 0, 202, 183, 175, 0, 184, 163, 155, 0, 169, 143, 139, 0, 153, 123, 123, 0, 137, 103, 107, 0, 247, 240, 229, 0, 255, 225, 207, 0, 255, 198, 178, 0, 246, 174, 159, 0, 220, 144, 132, 0, 189, 115, 107, 0, 158, 86, 82, 0, 130, 63, 59, 0, 214, 240, 181, 0, 184, 216, 165, 0, 154, 191, 148, 0, 128, 163, 135, 0, 102, 134, 116, 0, 76, 104, 100, 0, 49, 74, 84, 0, 22, 43, 67, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 244, 225, 200, 0, 220, 196, 174, 0, 195, 167, 148, 0, 168, 142, 128, 0, 140, 116, 108, 0, 109, 95, 93, 0, 79, 74, 78, 0, 48, 52, 63, 0, 255, 229, 181, 0, 243, 200, 158, 0, 230, 170, 134, 0, 211, 140, 110, 0, 179, 114, 89, 0, 158, 94, 73, 0, 115, 61, 47, 0, 85, 37, 26, 0, 253, 211, 148, 0, 255, 180, 115, 0, 222, 140, 100, 0, 189, 100, 85, 0, 156, 77, 72, 0, 118, 58, 50, 0, 79, 38, 28, 0, 43, 20, 8, 0, 203, 192, 233, 0, 179, 166, 210, 0, 155, 139, 186, 0, 130, 112, 162, 0, 104, 85, 135, 0, 76, 58, 106, 0, 48, 31, 76, 0, 22, 22, 48, 0, 255, 222, 191, 0, 235, 196, 168, 0, 215, 170, 145, 0, 195, 144, 122, 0, 174, 118, 98, 0, 142, 94, 75, 0, 110, 70, 52, 0, 78, 46, 28, 0, 255, 209, 220, 0, 233, 185, 198, 0, 211, 160, 176, 0, 188, 135, 153, 0, 149, 111, 130, 0, 110, 87, 106, 0, 83, 63, 83, 0, 56, 39, 59, 0, 209, 209, 214, 0, 188, 184, 193, 0, 167, 159, 172, 0, 145, 134, 150, 0, 116, 106, 120, 0, 87, 78, 90, 0, 58, 49, 60, 0, 35, 29, 36, 0, 255, 255, 203, 0, 255, 222, 172, 0, 255, 192, 140, 0, 235, 161, 113, 0, 207, 133, 92, 0, 178, 105, 71, 0, 141, 78, 57, 0, 103, 52, 41, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 0, 0, 255, 0, 0, 0, 154, 191, 148, 0}

	img := image.NewNRGBA(image.Rect(0, 0, width, height))

	if frame.SpriteType == FileTypeRGBA {
		log.Println("FileTypeRGBA")

		for y := 0; y < height; y++ {
			for x := 0; x < width; x++ {
				i := (x + y*width) * 4
				a := byte(0)

				if i != 0 {
					a = 255
				}

				img.Set(x, y, color.NRGBA{
					R: data[i+3],
					G: data[i+2],
					B: data[i+1],
					A: a,
				})
			}
		}
	} else {
		log.Println("FileTypePAL")

		for y := 0; y < height; y++ {
			for x := 0; x < width; x++ {
				i := data[x+y*width] * 4
				a := byte(0)

				if i != 0 {
					a = 255
				}

				img.Set(x, y, color.NRGBA{
					R: pal[i+0],
					G: pal[i+1],
					B: pal[i+2],
					A: a,
				})
			}
		}
	}

	return img
}
